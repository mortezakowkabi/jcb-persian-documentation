Hi I don't know some of you also encountered The reality of having to So limit the drop down Open list View Based on It's associated with another table A very common place where we find this For example When you want to load the regions of only one country I'm gonna show you how I have achieved this I realise there are many ways to do this and yet This is how I've done it Ok so to start off I have a component I could use his illustration All job tracking Component Obviously I have a client area And Already loaded I go to app and use YouTube as country and regions Now I'm gonna illustrated on the basis of country and regions Obviously can Change the Field Concepts in Replace it with other tables But No none the less this is what I'll be using And I'm gonna show you how employed implemented in inside the the client's View because that's basically when most of the work is done Ok so I'm gonna open the client View And then I'm gonna look in the two places we wanna look at Script Well as the PHP area Diovan various previous tutorials explain some of the Ajax functionality In component Builder But I realise not all of you What sort of tutorial so I'll explain some of that again Briefly But having said that The first gonna look What we really wanted she That said When you load So let me go show you that So when you Start with a client You would like to choose a country And then Haven't load only that countries regions Basically what you want to do Evermore You want to make sure It when it does that And you can select Country it also an select The region And Various things we wanted she here In JavaScript Show you how I've done that I'm just reading at the moment 1 country Maybe I should go spit on a few more so just hold on for a second back So now if I look it says Australia If I click on Australia You see that it doesn't load any regions in fact that says create a region Tattoos Namibia It says select a region and so there's three reads two regions already created Nice you know by now there is this button In some of the Dropdowns which are being added by saying true to the button And so it's very helpful For either Creating or editing existing regions So if you could sort of selecting a country where there isn't any regions set yet The basic details for the great one And you can then create a region for this country And what's nice if you click on this Create You can then simply create your region I'm close so I don't know 3 reasons so I'm just gonna call it Region for now And save and close But creating a client If I now Select Australia you see that it's got reading So there we go Problem solved And that's really what I'm gonna do my straight how I did that So let's get started On a JavaScript side of things I first have Two variables I actually could call them both of our Doesn't matter What is an object And one is simply where we are going at Store if there is a bell you already said We're gonna store that value Then on document ready I simply Oh yes Before I continue Creating the fields Wesley make it bring all the regions to the page I don't want it to Leave some regions on Unloaded how can I say Instead what I rather do Is a pastor's regions Into this variable And then only put those regions that are actually Part of this country Into the list of dropdown options that's really what I'm doing so that's What you also see happening here Is first thing I'm doing is I am Doing a for each On the regions options And then I'm getting the value I putting it in key I'm getting the text I'm putting it in text And then I'm adding it to Regis Simply as you would load it in any Any rain there And then I am also Getting the value of the set region And I'm adding that to Region And then I'm sitting the The function get region The gate region function is down here This area The first thing we do is we load it all Show how the loading show Rather this class Heidi Is loaded on the page by Default When you Set This fade effect On ad Then it by Default loads that class With a nice spinner And so I'm basically If the loading process takes long I'm sort of stopping the user from doing anything Waiting for that spinner Don't need to add that Then I am Finding Options The reason And I'm removing them All of them Then I'm triggering An update now this is This updated be a tricky year list as it is a Joomla function And it's actually Possibly gonna change in the future So keep that in the back of your mind It sings break it possible is happening right here Because this as you know the list the of is dynamically generated by Joomla And so we literally telling it Draw that list again But after having removed everything Now We are looking at the country Source of the year with only starts the region Now we get the country value the one that is selected And we add it to country We then call the server at this point And the only thing we are giving the server is the country ID Appear We have a country ID We have our Get URL Our case is get region Is there is the task We checking that the token is on the page Checking that a country ID is not zero And We then basically loading the request Shooting of an Ajax We doing it this way because obviously You wanna do some things after we've got The result which is this done And then we Set region We throw the result into said region We hide the load And Then Would you some house cleaning on the button So that button also gets Tampered with And I'll show you the region but incorrect Correction that we doing down here And you can copy this code Test that out obviously you would update this to whatever field you trying to limit And After set region Now we going to separate Region is quite simple Mainly because we already done most of the work With the result being returned and so I'll show you the PHP that returns this result in the moment Zayn said region would get an array Check if they raised there And then we attend Simply as you would With any list selection We append the value But now Since we are Oh yes Nothing Realise I'm almost keeping it This sect select region Is a JavaScript Variable That I'm setting through PHP Which I'll show you in a later Stage And basically it's just a string That says that you should select the region And if there is no rear a returned We basically just use the other variable Create a region which is also just as string So now are we here It's right over the array And we are using the ID And we checking whether the ID In regions If it's in regions We append the ID as a value And as you remember in regions we saved the text As well as the ID And so that is how we get the text Simply adding it in there I know we could have done that in the PHP but I felt a let's let's let the The browser help us with some of the lifting So We got the regions there if it's a huge table you might want it should approach this differently Eventually we are checking whether the ID and the region = Since if it does your mother ensure to set Region Value so as your member previously We found the region value And which store did into region Just in case The value was set before and saved Now the person is looking through different countries But when you can select the country that previously was saved We want to make sure that his previous region is also shown as the selected value That simply what we doing here Then after everything is done we again trigger this List Update Which is the same as what was triggered there And that basically sets the regions list again afresh Then only Do we run this little bit of housekeeping Which does the Regent button Now the reason button It's actually A JavaScript That is added Because of the list Field so if your specific list field was said to have no button You could simply leave this out If it was said to have a button Then this is the usually the name of the button with B the the This area before the J form Underscore This part of the name Would be the first part of the name of the button function and then the last part would be button So that's how you know and you can obviously on the page Let it execute and search for this function if you aren't sure But that's how you would Run The button correction And that's basically How did JavaScript looks to achieve this Ok A more housework necessary and that's what I said before This area of JavaScript can actually include BHP Erica not because that's just pure JavaScript file Where's this is JavaScript add it to a php file So we're we can add some PHP and that's where we get the select region and create region Now I know there is another way to do this in Javascript itself so forgive me for being so sloppy Anyway There is this function Which basically when the admin form on change of the country field is When an event occurs We want to execute get region That Every time That you've changed What is the extra bit of Script that you need to add these two If you are gonna Copy this down exactly the same Just another note We see then execute this function which is the same function That we are executing On the page load We don't need to read execute this Simply because that is already been done on the page load All the JavaScript But you need to add Now let's go look at the PHP Should know by now you do not need to add the PHP to the same admin View Since all the ajak methods are all added to one file In the component called Ajax the the model As well as the controller is the Ajax model in controller so if you compile the component You can unzip it and go to the model To the controller Hi there in the backend or in the front end Where is now it will be in the back end And it's under models Auc there's an Ajax model in All of the backend Ajax Methods gets added to this one model And so this area is what takes care of the model And And this area here takes care of the Controller So basically saying the values name is country Discuss get region if no values passed it's Noel And it must be an integer that is And the method name is get region And it must be a logged in user that's a simple as that is That takes care of the whole controller setup Then here The method Called get region it gets the ID It doesn't need to sanitize it again since the controller already did that You can go look at the controller to see the implementation So we simply getting the Battery How did factories passes us the database We set up a query we say that we are looking for the ID is Of the in the region That are published I'm basically where the country Now this is a game where you need to sort of Make your changes We want the names of the regions or the ideas instead sorry of the regions Their association with the country Obviously then in the region Table We have a a a field a column That is called country And it has an ID in it So that each region Is linked to a country so whatever Table you are targeting Dissociation would be than this country And it's obviously Karen White wedges at the entering there again Set the query executed check if you have a value And if we do we simply return the load Load column Function Which returns the ID is in an array There we go done finished And There we return false if no value was found in its simple as that that's all the PHP use Need And that returns The the PHP 2 hour JavaScript And the JavaScript does the rest Ok well I hope this will be very helpful And help you to sort of sort your dropdowns I didn't spend Watch time on explaining that maybe I should so let me Give a Quik Run over of that The field that we are Focusing on is this country in the region field and they are both custom right So I've already done tutorials on how to set up a custom field I'm not gonna spend too much on this But just for reminder that open region Simply saying the button is true And We select the region you can obviously update the view name dynamically in the description And here we doing some PHP Put all of this PHP Adjust PHP one Without adding it to the 19th Yes placement But like I've done I've actually used every area I like making the code look It was written Enough computer-generated And Then I'm adding the options and so this is just a simple basic Avon Any job script in here I've Done Everything basically in the model Did the PHP is Wallace to Javascript sorry not in the model in the back in admin View And I think that is because I wanna use this field maybe in other views with different Different Association So I I I don't tend to use the script area Maybe as one might expect So that's quickly looking At Filtering a dropdown list selection custom list selection Via JavaScript And Ajax therefore If you are targeting a table of another Component which you you're not having the control over there The actual field names it will it should work the same way if the US as long as there is A field of Association within the table that you'd like to filter Good right that PHP Find the values and filter it Thanks for watching